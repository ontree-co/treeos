{{define "title"}}Application Templates - OnTree{{end}}

{{define "content"}}
<div class="row">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb templates-breadcrumb">
                <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                <li class="breadcrumb-item active">Application Templates</li>
            </ol>
        </nav>
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1><i class="bi bi-collection"></i> Application Templates</h1>
            <div class="d-flex gap-3">
                <a href="/apps/create" class="btn btn-secondary">
                    <i class="bi bi-code-slash"></i> Create from Scratch
                </a>
                <a href="/" class="btn btn-secondary">
                    ‚Üê Back to Dashboard
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="alert alert-info template-hint">
            <h5><i class="bi bi-lightbulb"></i> Quick Start with Templates</h5>
            <p class="mb-0">
                Select a pre-configured template below to quickly deploy popular applications. 
                Each template includes optimized settings and can be customized after creation.
            </p>
        </div>
    </div>
</div>

{{if .CategorizedTemplates}}
{{range $index, $category := .CategoryOrder}}
{{$templates := index $.CategorizedTemplates $category}}
{{if $templates}}
<div class="category-section mb-5">
    <h3 class="category-title mb-4">
        {{if eq $category "LLM Inference"}}
            <i class="bi bi-cpu"></i> {{$category}}
        {{else if eq $category "LLM Web Interfaces"}}
            <i class="bi bi-chat-dots"></i> {{$category}}
        {{else}}
            <i class="bi bi-grid-3x3-gap"></i> {{$category}}
        {{end}}
    </h3>
    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3">
        {{range $templates}}
        <div class="col mb-4">
            <div class="card h-100 template-card">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center mb-3 template-header">
                        <i class="{{.Icon}} fs-2 template-icon me-3"></i>
                        <h5 class="card-title mb-0">{{.Name}}</h5>
                    </div>

                    <p class="card-text flex-grow-1">{{.Description}}</p>

                    {{if .Port}}
                    <p class="small mb-3 port-text">
                        <i class="bi bi-ethernet"></i> Default port: {{.Port}}
                    </p>
                    {{end}}

                    <div class="d-flex gap-3 template-actions">
                        <a href="/templates/{{.ID}}/create" class="btn btn-primary template-action">
                            <i class="bi bi-plus-circle"></i> Use Template
                        </a>
                        {{if .DocumentationURL}}
                        <a href="{{.DocumentationURL}}" target="_blank" class="btn btn-secondary template-action">
                            <i class="bi bi-globe2"></i> Website
                        </a>
                        {{end}}
                    </div>
                </div>
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}
{{end}}
{{else}}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body text-center py-5">
                <i class="bi bi-folder-x fs-1 text-muted mb-3"></i>
                <h4>No Templates Available</h4>
                <p class="text-muted">No application templates are currently available.</p>
                <a href="/apps/create" class="btn btn-primary">
                    Create App from Scratch
                </a>
            </div>
        </div>
    </div>
</div>
{{end}}

<style>
.template-card {
    cursor: pointer;
    background-color: var(--monitoring-card-surface, var(--color-panel-surface));
    border: 1px solid var(--color-border-subtle);
}

.template-card .card-body {
    min-height: 250px;
    background-color: var(--monitoring-card-surface, var(--color-panel-surface));
}

.port-text {
    color: var(--color-text-primary);
}

.template-header .template-icon {
    color: var(--color-brand-primary);
}

[data-theme="dark"] .template-header .template-icon {
    color: var(--color-text-primary);
}

.template-header .card-title {
    margin: 0;
}

.templates-breadcrumb .breadcrumb-item a {
    color: var(--color-text-primary);
}

.templates-breadcrumb .breadcrumb-item {
    color: var(--color-text-primary);
}

.templates-breadcrumb .breadcrumb-item+.breadcrumb-item::before {
    color: var(--color-text-primary);
}

.template-icon {
    color: var(--color-accent-blue);
}

[data-theme="dark"] .template-icon {
    color: var(--color-accent-blue-light, var(--color-accent-blue));
}

.template-hint {
    background-color: rgba(var(--color-accent-blue-rgb, 91, 130, 225), 0.12);
    border-color: var(--color-accent-blue);
}

[data-theme="dark"] .template-hint {
    background-color: rgba(var(--color-accent-blue-light-rgb, 143, 180, 255), 0.25);
    border-color: var(--color-accent-blue-light, var(--color-accent-blue));
}

.template-actions {
    margin-top: auto;
}

.template-action {
    flex: 1;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
}

.category-section {
    padding-top: 1rem;
}

.category-section:first-child {
    padding-top: 0;
}

.category-title {
    color: var(--color-brand-primary);
    border-bottom: 2px solid var(--color-border-subtle);
    padding-bottom: 0.5rem;
    font-size: 1.5rem;
}

.category-title i {
    color: var(--color-brand-primary);
}

[data-theme="dark"] .category-title,
[data-theme="dark"] .category-title i {
    color: var(--color-text-primary);
}
</style>
{{end}}
